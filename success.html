<!doctype html><html lang="fr"><head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Merci !</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<header class="header"><div class="wrap nav"><img src="assets/logo-firefit.png" class="logo"><div class="brand">F I R E F I T</div></div></header>
<main class="wrap"><section class="hero"><h1>Commande confirmÃ©e âœ…</h1><p class="sub" id="msg">On prÃ©pare ton lienâ€¦</p></section></main>
<script type="module">
  import { CONFIG } from './js/config.js';
  (async ()=>{
    const sid = new URLSearchParams(location.search).get('session_id');
    if (!sid){ document.getElementById('msg').textContent = 'Session manquante.'; return; }
    const r = await fetch(`${CONFIG.API_BASE}/session-info?id=${encodeURIComponent(sid)}`);
    const { preview, dl, error } = await r.json();
    if (error){ document.getElementById('msg').textContent = error; return; }
    const url = `/viewer.html?preview=${encodeURIComponent(preview)}&dl=${encodeURIComponent(dl)}`;
    document.getElementById('msg').innerHTML = `<a class="btn" href="${url}">ðŸ‘‰ Ouvrir mon programme</a>`;
    setTimeout(()=>location.href=url, 1200);
  })();
</script>
</body></html>
